<!DOCTYPE html>
 <html lang="en" class="h-100">

 <head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=Edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <title>To-Do List</title>

   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
   <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
   <script type="module" src="main.js"></script>
   <link rel="stylesheet" href="style.css">    
 
  </head>
  <header>
        <h1> SMK INSAN CEMERLANG</h1>
        <h1> Habibatul Aulia üíê </h1>
    </header>
  <style>body {
          font-family: 'Segoe UI', sans-serif;
      background-color: lightpink;
      padding: 20px;
      color: #4d004d;
    }

    h1 {
      text-align: center;
      color: #cc0066;
    }

    .input-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    input, button {
      padding: 8px 12px;
      border: 1px  #cc0066;
      border-radius: 5px;
      font-size: 14px;
    }

    button {
      background-color: lightpink;
            margin: 0;
            padding: 0;
            color: white;
            font-family: Arial, sans-serif;
    }

    button:hover {
      background-color: #e60073;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background-color: lightpink;
    }

    th, td {
      border: 1px solid #cc0066;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #cc0066;
      color: white;
    }

    .done {
      text-decoration: line-through;
      color: #666;
      background-color: #ffe6f0;
    }

    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr {
        font-size: 12px;
      }
    }
  </style>
 <body class="d-flex-colum h-100">
   
   
      <!-- dropdown -->
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
      menu
    </button>
    
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
      <li><a class="dropdown-item" href="tambah.html">tambah</a></li>
    </ul>
  </div>
  
   <table class="table" id="daftar-tugas">
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
      <li><a class="dropdown-item" href="tambah.html">tambah</a></li>
    </ul>
  </div>

     <thead>
       <tr>
         <th scope="col">#</th>
         <th scope="col">tugas</th>
         <th scope="col" id="status">status</th>
         <th scope="col">prioritas</th>
         <th scope="col">tanggal</th>
         <th>aksi</th>
         <th>aksi</th>
       </tr>
     </thead>
     <tbody>
     </tbody>
   </table>


   <script type="module">
     import { ambildaftartugas, hapustugas } from './main.js';

     $(document).ready(async function() {
       let elemenDaftar = $("#daftar-tugas > tbody");
       let daftartugas = await ambildaftartugas();
       let nomor = 1;
       daftartugas.forEach((data) => {
         elemenDaftar.append(
           `<tr>
             <th>${nomor}</th>
             <td>${data.tugas}</td>
             <td>
               <button class="btn-status" data-status="${data.status}" data-id="${data.id}">${data.status}</button>
             </td>
             <td>${data.prioritas}</td>
             <td>${data.tanggal}</td>
             <td><button class="btn btn-warning ubah" data-id="${data.id}" data-tugas="${data.tugas}" data-status="${data.status}" data-prioritas="${data.prioritas}" data-tanggal="${data.tanggal}">Ubah</button></td>
             <td><a href="#" class="btn btn-danger tombol-hapus" data-id="${data.id}">Hapus</a></td>
           </tr>`
         );
         nomor++;
       });

       // Gunakan event delegation untuk hapus tugas
       $(document).on('click', '.tombol-hapus', async function() {
         await hapustugas($(this).attr('data-id'));
         location.reload();
       });

       // Gunakan event delegation untuk ubah tugas
       $(document).on('click', '.ubah', function() {
         let docId = $(this).attr('data-id');
         let tugas = $(this).attr('data-tugas');
         let status = $(this).attr('data-status');
         let prioritas = $(this).attr('data-prioritas');
         let tanggal = $(this).attr('data-tanggal');

         window.location.replace(`ubahtugas.html?docId=${docId}&tugas=${tugas}&status=${status}&prioritas=${prioritas}&tanggal=${tanggal}`);
       });
     });
   </script>
   <footer class="py-3 bg-dark-subtle mt-auto">
      <ul class="nav justify-content-center border-bottom pb-3 mb-3">

      </ul>
      <p class="text-center text-body-secondary">&copy; SMK PLUS INSAN CEMERLANG 2025
        # TODOLIST 
        # UJIKOM2025</p>
    </footer>

 </body>

 </html>